<html>
    <head>
        <script type="text/javascript">
            todos = [
                'Put Tommy out',
                'Feed and medicate Tommy',
                'Feed cats',
                'Fill animal waters',
                'Wash bottles',
                'Check diaper pail'
            ];

            currentTodos = todos.slice();

            completedTodos = [];

            function load(options, completed) {
                var i = 0;
                return [""].concat(options).reduce(function(string, value) {
                    return string + newTodo(value, i++, completed);
                });
            }

            function newTodoInput() {
                return "<input type='text' id='newInput' />";
            }

            function addTodoButton() {
                return "<button onclick=\"createNew();\">+</button>";
            }

            function newTodo(value, i, completed) {
                var style = completed ? 'line-through' : 'none';
                return "<div><button onclick=\"completeTodo(" + i + ")\">X</button><span style='text-decoration: " + style + "' id='todo" + i + "'>" + value + "</span></div>";
            }

            function render() {
                var main = document.getElementById("todos");
                main.innerHTML = ""
                main.innerHTML += load(currentTodos, false);
                main.innerHTML += load(completedTodos, true);
                main.innerHTML += newTodoInput();
                main.innerHTML += addTodoButton();
            }

            function createNew() {
                input = document.getElementsById('newInput');
                if (input.value != '') {
                    currentTodos.push(input.value);
                }
                input.value = '';
                render();
            }

            function completeTodo(i) {
                todo = currentTodos.splice(i, 1);
                completedTodos.push(todo);
                render();
            }

            window.onload = function() {
                render();
            };
        </script>
    </head>
    <body>
        <ul id="todos"></ul>
    </body>
</html>
