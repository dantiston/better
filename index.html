<html>
    <head>
        <script type="text/javascript">

            var todos = [
                'Put Tommy out',
                'Feed and medicate Tommy',
                'Feed cats',
                'Fill animal waters',
                'Wash bottles',
                'Check diaper pail'
            ];

            currentTodos = todos.slice();

            completedTodos = [];

            function load(options, completed) {
                var i = 0;
                return [""].concat(options).reduce(function(string, value) {
                    return string + newTodo(value, i++, completed);
                });
            }

            function newTodoInput() {
                return "<input type='text' id='newInput' />";
            }

            function addTodoButton() {
                return "<button onclick=\"createNew()\">+</button>";
            }

            function newTodo(value, i, completed) {
                var style = completed ? 'line-through' : 'none';
                var attribute = completed ? 'disabled' : "onclick=\"completeTodo(" + i + ")\"";
                return "<div><button " + attribute + ">X</button>" +
                            "<span style='text-decoration: " + style + "' id='todo" + i + "'>" + value + "</span>" +
                       "</div>";
            }

            function render() {
                var main = document.getElementById("todos");
                main.innerHTML = ""
                main.innerHTML += load(currentTodos, false);
                main.innerHTML += load(completedTodos, true);
                // main.innerHTML += newTodoInput();
                // main.innerHTML += addTodoButton();
            }

            // function createNew() {
            //     input = document.getElementsById('newInput');
            //     alert(input.value);
            //     if (input.value != '') {
            //         currentTodos.push(input.value);
            //     }
            //     input.value = '';
            //     render();
            // }

            function completeTodo(i) {
                todo = currentTodos.splice(i, 1);
                if (todo.length > 0) {
                    completedTodos.push(todo[0]);
                }
                render();
            }

            // function repeatAt(hour, f) {
            //     var now = new Date();
            //     var date = now.getDate() + (now.getHours() < hour ? 0 : 1);
            //     var start = new Date(now.getFullYear(), now.getMonth(), date, hour, 0, 0, 0);
            //
            //     var wait = start.getTime() - now.getTime();
            //     setTimeout(() => {
            //         f();
            //         setInterval(f, this.secondsInTheDay);
            //     }, wait);
            // }

            window.onload = function() {
                render();
                // repeatAt(0, function() {
                //     currentTodos = todos.slice();
                //     completedTodos = [];
                //     render();
                // });
                // document.getElementById('newInput').onKeyUp = function() {
                //     if (event.keyCode == 13) {
                //         createNew();
                //         return false;
                //     }
                // }
            };
        </script>
        <style>
            html {
                font-size: 16pt;
            }

            button {
                font-size: 16pt;
                margin-right: 8pt;
            }

            ul {
                padding: 5px;
            }
        </style>
    </head>
    <body>
        <ul id="todos"></ul>
    </body>
</html>
