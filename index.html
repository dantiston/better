<html>
    <head>
        <script type="text/javascript">
            todos = [
                'Put Tommy out',
                'Feed and medicate Tommy',
                'Feed cats',
                'Fill animal waters',
                'Wash bottles',
                'Check diaper pail'
            ];

            newTodos = [];

            completedTodos = [];

            function load(options) {
                var i = 0;
                return [""].concat(options).reduce(function(string, value) {
                    return string + newTodo(value, i++);
                });
            }

            function newTodoInput() {
                return "<input type='text' id='newInput' />";
            }

            function addTodoButton() {
                return "<button onclick=\"createNew();\">+</button>";
            }

            function newTodo(value, i) {
                return "<div><button onclick=\"completeTodo(" + i + ")\">X</button><span id='todo" + i + "'>" + value + "</span></div>";
            }

            function render() {
                var main = document.getElementById("todos");
                main.innerHTML += load(todos);
                main.innerHTML += load(newTodos);
                main.innerHTML += newTodoInput();
                main.innerHTML += addTodoButton();
            }

            function createNew() {
                input = document.getElementsById('newInput');
                if (input.value != '') {
                    newTodos.push(input.value);
                }
                input.value = '';
                render();
            }

            function completeTodo(i) {
                todo = todos.splice(i, 1);
                newTodos.push(todo);
                render();
            }

            window.onload = function() {
                render();
            };
        </script>
    </head>
    <body>
        <ul id="todos"></ul>
    </body>
</html>
